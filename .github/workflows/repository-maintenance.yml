name: Repository Maintenance

on:
  issues:
    types: [opened]
  pull_request:
    types: [opened, synchronize]

jobs:
  greeting:
    runs-on: ubuntu-latest
    permissions:
      issues: write
      pull-requests: write

    steps:
      - name: Greet new issue
        if: github.event_name == 'issues'
        uses: actions/github-script@v7
        with:
          script: |
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: 'ðŸ‘‹ Thank you for opening this issue! We appreciate your contribution and will review it soon.'
            })

      - name: Greet new PR
        if: github.event_name == 'pull_request'
        uses: actions/github-script@v7
        with:
          script: |
            github.rest.pulls.createComment({
              pull_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: 'ðŸ‘‹ Thank you for your pull request! We appreciate your contribution and will review it soon.'
            })

  size-check:
    runs-on: ubuntu-latest
    permissions:
      contents: read

    steps:
      - name: Check PR size
        if: github.event_name == 'pull_request'
        uses: actions/github-script@v7
        with:
          script: |
            const pr = await github.rest.pulls.get({
              owner: context.repo.owner,
              repo: context.repo.repo,
              pull_number: context.issue.number
            });
            
            const filesChanged = pr.data.changed_files;
            const additions = pr.data.additions;
            const deletions = pr.data.deletions;
            
            console.log(`Files changed: ${filesChanged}`);
            console.log(`Additions: ${additions}`);
            console.log(`Deletions: ${deletions}`);
            
            if (filesChanged > 50) {
              console.log('Warning: Large PR detected. Consider breaking it into smaller PRs.');
            }
